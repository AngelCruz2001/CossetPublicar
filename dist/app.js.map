{"version":3,"sources":["../server/index.js"],"names":["builder","require","restify","btoa","base64img","opn","Diccionario","conexion","connector","funciones","Producto","Accion","sql","direccionI","inMemoryStorage","MemoryBotStorage","Extension1","Raraimg","Tarjetas1","Tarjetas","revisar","ProductoElegido","ProductosElegidos","server","createServer","conectar","listen","process","env","port","PORT","console","log","name","url","ChatConnector","appId","appPassword","bot","UniversalBot","post","model","Salon","recognizer","LuisRecognizer","dialog","IntentDialog","recognizers","YaNoEntres","Asesorar","Hora","Date","getHours","Saludo","PrimeraVez","SigueSaludando","Extension","on","message","membersAdded","length","txt","reply","Message","address","text","send","matches","session","login","Random","Math","floor","random","args","next","EntityRecognizer","findAllEntities","entities","Precio","Imagen","ExtensionEntidad","ExtensionPrecio","ExtensionImagen","entity","BP","then","respuesta","BuscarSE","beginDialog","GuiaPago","GuiaCarrito","Prompts","choice","listStyle","ListStyle","button","results","response","traerProductos","opciones"],"mappings":";;AAAC;AACD,IAAIA,UAAUC,QAAQ,YAAR,CAAd;AACA,IAAIC,UAASD,QAAS,SAAT,CAAb;AACA,IAAIE,OAAKF,QAAQ,MAAR,CAAT;AACA,IAAIG,YAAYH,QAAS,YAAT,CAAhB;AACA,IAAII,MAAMJ,QAAQ,KAAR,CAAV;AACA,IAAIK,cAAYL,QAAQ,gBAAR,CAAhB;AACA;AACA,IAAIM,WAASN,QAAQ,gBAAR,CAAb;AACA,IAAIO,YAAUP,QAAQ,eAAR,CAAd;AACA,IAAIQ,YAAUR,QAAQ,SAAR,CAAd;AACA,IAAIS,QAAJ;AAAA,IAAaC,MAAb;AAAA,IAAoBC,GAApB;AAAA,IAAwBC,aAAW,YAAnC;AACA,IAAIC,kBAAkB,IAAId,QAAQe,gBAAZ,EAAtB;AACA,IAAIC,aAAW,CAAf;AAAA,IAAiBC,UAAQ,EAAzB;AAAA,IAA4BC,YAAU,EAAtC;AAAA,IAAyCC,WAAS,EAAlD;AAAA,IAAqDC,OAArD;AACA,IAAIC,kBAAgB,EAApB;AAAA,IAAuBC,iBAAvB;AACA;AACA,IAAIC,SAASrB,QAAQsB,YAAR,EAAb;AACAhB,UAAUiB,QAAV;AACA;AACAF,OAAOG,MAAP,CAAcC,QAAQC,GAAR,CAAYC,IAAZ,IAAoBF,QAAQC,GAAR,CAAYE,IAAhC,IAAsC,IAApD,EAAyD,YAAU;AAC/DC,YAAQC,GAAR,CAAY,cAAZ,EAA4BT,OAAOU,IAAnC,EAAyCV,OAAOW,GAAhD;AACH,CAFD;AAGA;AACA,IAAI1B,YAAY,IAAIR,QAAQmC,aAAZ,CAA0B,EAACC,OAAO,EAAR,EAAWC,aAAY,EAAvB,EAA1B,CAAhB;AACA;AACA,IAAIC,MAAM,IAAItC,QAAQuC,YAAZ,CAAyB/B,SAAzB,CAAV;AACAe,OAAOiB,IAAP,CAAY,eAAZ,EAA4BhC,UAAUkB,MAAV,EAA5B;AACA;;;AAGA;AACA,IAAIe,QAAQ,oLAAZ;AACA,IAAIC,KAAJ;AACA,IAAIC,aAAa,IAAI3C,QAAQ4C,cAAZ,CAA2BH,KAA3B,CAAjB;AACA,IAAII,SAAQ,IAAI7C,QAAQ8C,YAAZ,CAAyB,EAACC,aAAY,CAACJ,UAAD,CAAb,EAAzB,CAAZ;;AAEA;AACA,IAAIK,aAAW,IAAf;AACA,IAAIC,QAAJ;AACA,IAAIC,OAAO,IAAIC,IAAJ,GAAWC,QAAX,EAAX;AACA,IAAIC,SAAO,EAAX;AACA,IAAIC,aAAW,IAAf;AACA,IAAIC,iBAAe,KAAnB;AACA,IAAIC,YAAU,CAAd;AACAlB,IAAImB,EAAJ,CAAO,oBAAP,EAA6B,UAAUC,OAAV,EAAmB;AAC5C,QAAIA,QAAQC,YAAR,IAAwBD,QAAQC,YAAR,CAAqBC,MAArB,GAA8B,CAA1D,EAA6D;AACzD,YAAGZ,UAAH,EAAc;AACV;AACA,gBAAGE,QAAM,EAAN,IAAYA,OAAK,EAApB,EAAuB;AACnBG,yBAAO,eAAP;AACH,aAFD,MAEM,IAAGH,QAAM,EAAN,IAAYA,OAAK,EAApB,EAAuB;AACzBG,yBAAO,eAAP;AACH,aAFK,MAEA,IAAGH,OAAK,CAAL,IAAUA,OAAK,EAAlB,EAAqB;AACvBG,yBAAO,aAAP;AACH,aAFK,MAED;AACDA,yBAAO,MAAP;AACH;;AAED,gBAAIQ,MAAQR,MAAR,gCAAJ;AACA,gBAAIS,QAAQ,IAAI9D,QAAQ+D,OAAZ,GACHC,OADG,CACKN,QAAQM,OADb,EAEHC,IAFG,CAEEJ,GAFF,CAAZ;AAGAvB,gBAAI4B,IAAJ,CAASJ,KAAT;AACAd,yBAAW,KAAX;AACH;AACA;AAGR,CAxBD;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGAV,IAAIO,MAAJ,CAAW,GAAX,EAAgBA,MAAhB;AACAA,OAAOsB,OAAP,CAAe,eAAf,EAA+B,CAC3B,UAACC,OAAD,EAAW;AACP;;AAEAA,YAAQF,IAAR,CAAa,sFAAb;AACAzD,cAAU4D,KAAV,CAAgBD,OAAhB;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAd2B,CAA/B;AAgBAvB,OAAOsB,OAAP,CAAe,QAAf,EAAwB,CACpB,UAACC,OAAD,EAAW;AACP,QAAG,CAACb,cAAJ,EAAmB;AACfa,gBAAQF,IAAR,CAAa,MAAb;AACAE,gBAAQF,IAAR,CAAa,qCAAb;AACAX,yBAAe,IAAf;AACH,KAJD,MAIM;AACFa,gBAAQF,IAAR,CAAa,sCAAb;AACH;AACJ,CATmB,CAAxB;AAWArB,OAAOsB,OAAP,CAAe,MAAf,EAAsB,CAClB,UAACC,OAAD,EAAW;AACPA,YAAQF,IAAR,CAAa,MAAb;AACH,CAHiB,CAAtB;AAMArB,OAAOsB,OAAP,CAAe,WAAf,EAA2B,CACvB,UAACC,OAAD,EAAW;AACP,QAAIE,SAASC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,CAA3B,IAA8B,CAA3C;AACA,YAAOH,MAAP;AACI,aAAK,CAAL;AACIF,oBAAQF,IAAR,CAAa,2CAAb;AACA;AACJ,aAAK,CAAL;AACIE,oBAAQF,IAAR,CAAa,wCAAb;AACA;AACJ,aAAK,CAAL;AACIE,oBAAQF,IAAR,CAAa,6EAAb;AACA;AACJ,aAAK,CAAL;AACIE,oBAAQF,IAAR,CAAa,yCAAb;AACA;AAZR;AAcH,CAjBsB,CAA3B;;AAoBA;AACArB,OAAOsB,OAAP,CAAe,SAAf,EAAyB,CACrB,gBAAMC,OAAN,EAAcM,IAAd,EAAmBC,IAAnB,EAA0B;AACtB,QAAIjE,WAASV,QAAQ4E,gBAAR,CAAyBC,eAAzB,CAAyCH,KAAKI,QAA9C,EAAwD,UAAxD,CAAb;AACA,QAAIC,SAAO/E,QAAQ4E,gBAAR,CAAyBC,eAAzB,CAAyCH,KAAKI,QAA9C,EAAuD,QAAvD,CAAX;AACA,QAAIE,SAAOhF,QAAQ4E,gBAAR,CAAyBC,eAAzB,CAAyCH,KAAKI,QAA9C,EAAuD,QAAvD,CAAX;AACA,QAAIG,mBAAiBvE,SAASkD,MAA9B;AAAA,QAAqCsB,kBAAgBH,OAAOnB,MAA5D;AAAA,QAAmEuB,kBAAgBH,OAAOpB,MAA1F;AACA7B,YAAQC,GAAR,aAAsBkD,eAAtB,oBAAoDC,eAApD;AACApD,YAAQC,GAAR,CAAYiD,gBAAZ;AACA,QAAGvE,SAASkD,MAAT,GAAgB,CAAnB,EAAqBvC,kBAAgBX,SAAS,CAAT,EAAY0E,MAA5B;AACrB/D,sBAAgBf,YAAYA,WAAZ,CAAwBe,eAAxB,CAAhB;AACAU,YAAQC,GAAR,CAAY,MAAIX,eAAJ,GAAoB,GAAhC;AACA,QAAG6D,kBAAgB,CAAnB,EAAqB;AACjB9D,kBAAQ,QAAR;AACH,KAFD,MAEM,IAAG+D,kBAAgB,CAAnB,EAAqB;AACvB/D,kBAAQ,QAAR;AACH;AACD,QAAGC,oBAAkB,EAArB,EAAwB;AACpB,cAAMd,SAAS8E,EAAT,CAAYhE,eAAZ,EAA6BiE,IAA7B,CAAkC,UAACC,SAAD,EAAa;AACjDjE,gCAAkBiE,SAAlB,CADiD,CACpB;AAChC,SAFK,CAAN;AAGH,KAJD,MAIK;AACD,cAAMhF,SAASiF,QAAT,GAAoBF,IAApB,CAAyB,UAACC,SAAD,EAAa;AACxCjE,gCAAkB,EAAlB;AACAA,gCAAkBiE,SAAlB;AACH,SAHK,CAAN;AAIH;;AAED,QAAGN,mBAAiB,CAApB,EAAsB;;AAGlBlD,gBAAQC,GAAR,CAAY,SAAOX,eAAnB;;AAGAU,gBAAQC,GAAR,CAAY,cAAYZ,OAAxB;AACA,YAAGA,YAAU,QAAb,EAAsB;AAClBgD,oBAAQqB,WAAR,CAAoB,YAApB;AACH,SAFD,MAEM,IAAGrE,YAAU,QAAb,EAAsB;AACxBgD,oBAAQqB,WAAR,CAAoB,YAApB;AACH;AACDrB,gBAAQqB,WAAR,CAAoB,YAApB;AACA1D,gBAAQC,GAAR,CAAY,0BAAwBV,kBAAkBsC,MAAtD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEH,KAxBD,MAwBK;AACD7B,gBAAQC,GAAR,CAAY,OAAZ;AACAoC,gBAAQqB,WAAR,CAAoB,kBAApB;AAEH;;AAEL;AACC,CA1DoB,CAAzB;AA6DA5C,OAAOsB,OAAP,CAAe,OAAf,EAAuB,CACnB,UAACC,OAAD,EAAW;AACP3D,cAAUiF,QAAV,CAAmBtB,OAAnB;AACH,CAHkB,CAAvB;AAKAvB,OAAOsB,OAAP,CAAe,SAAf,EAAyB,CACrB,UAACC,OAAD,EAAW;AACP3D,cAAUkF,WAAV,CAAsBvB,OAAtB;AACH,CAHoB,CAAzB;;AAMA9B,IAAIO,MAAJ,CAAW,kBAAX,EAA8B,CAC1B,UAACuB,OAAD,EAAW;AACPrC,YAAQC,GAAR,CAAY,sCAAZ;AACAoC,YAAQF,IAAR,CAAa,UAAb;AACAlE,YAAQ4F,OAAR,CAAgBC,MAAhB,CAAuBzB,OAAvB,EAA+B,uDAA/B,EAAuF,OAAvF,EAA+F,EAAE0B,WAAW9F,QAAQ+F,SAAR,CAAkBC,MAA/B,EAA/F;AACH,CALyB,EAM1B,UAAC5B,OAAD,EAAS6B,OAAT,EAAmB;AACfhD,eAASgD,QAAQC,QAAR,CAAiBd,MAA1B;AACArD,YAAQC,GAAR,CAAYiB,QAAZ;AACA,QAAGA,aAAW,IAAd,EAAmB;AACf;AACAxC,kBAAU0F,cAAV,CAAyB/B,OAAzB,EAAiC9C,iBAAjC;AACA8C,gBAAQF,IAAR,CAAa,qDAAb;AACA5C,4BAAkB,EAAlB;AACAD,0BAAgB,EAAhB;AACAX,mBAAS,EAAT;AACH,KAPD,MAOK;AACD0D,gBAAQF,IAAR,CAAa,qCAAb;AACH;AACDE,YAAQqB,WAAR,CAAoB,GAApB;AAEH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AApC0B,CAA9B;;AAuCAnD,IAAIO,MAAJ,CAAW,YAAX,EAAwB,CACpB,UAACuB,OAAD,EAAW;AACPA,YAAQF,IAAR,CAAa,iBAAb;AACA,QAAIkC,QAAJ;AACA;AACA;AACA;AACA;AACA3F,cAAU0F,cAAV,CAAyB/B,OAAzB,EAAiC9C,iBAAjC;AACA8C,YAAQF,IAAR,CAAa,6CAAb;AACA5C,wBAAkB,EAAlB;AACAD,sBAAgB,EAAhB;AACAX,eAAS,EAAT;AACA0D,YAAQqB,WAAR,CAAoB,GAApB;AACA;AACH,CAfmB,CAAxB","file":"index.js","sourcesContent":["﻿//Variables de dependencias\r\nvar builder = require('botbuilder');\r\nvar restify =require ('restify');\r\nvar btoa=require('btoa');\r\nvar base64img = require ('base64-img');\r\nvar opn = require('opn');\r\nvar Diccionario=require('../Diccionario');\r\n//Variables globales\r\nvar conexion=require('./db/Consultas');\r\nvar connector=require('./db/conexion');\r\nvar funciones=require('./Ayuda');\r\nvar Producto,Accion,sql,direccionI=\"C:\\\\imgBot\";\r\nvar inMemoryStorage = new builder.MemoryBotStorage();\r\nvar Extension1=2,Raraimg=\"\",Tarjetas1=[],Tarjetas=[],revisar;\r\nvar ProductoElegido=\"\",ProductosElegidos;\r\n// Levantar Restify\r\nvar server = restify.createServer();\r\nconnector.conectar();\r\n//configurando puerto\r\nserver.listen(process.env.port || process.env.PORT||3000,function(){\r\n    console.log('listering to', server.name, server.url);\r\n})\r\n//Configuraciones del bot\r\nvar connector = new builder.ChatConnector({appId: '',appPassword:''})\r\n//Crear bot\r\nvar bot = new builder.UniversalBot(connector);\r\nserver.post('/api/messages',connector.listen());\r\n//conexion base de datos\r\n\r\n    \r\n//Configuracion de LUIS\r\nvar model = \"\thttps://westus.api.cognitive.microsoft.com/luis/v2.0/apps/b52309e8-88bd-4a01-9ddf-3be52dc0a036?subscription-key=a26e9792086947db99112f2aa9d5c3a3&verbose=true&timezoneOffset=0&q=\";\r\nvar Salon;\r\nvar recognizer = new builder.LuisRecognizer(model);\r\nvar dialog= new builder.IntentDialog({recognizers:[recognizer]});\r\n\r\n//Variables\r\nvar YaNoEntres=true;\r\nvar Asesorar;\r\nvar Hora = new Date().getHours();\r\nvar Saludo=\"\";\r\nvar PrimeraVez=true;\r\nvar SigueSaludando=false;\r\nvar Extension=3;\r\nbot.on('conversationUpdate', function (message) {\r\n    if (message.membersAdded && message.membersAdded.length > 0) {\r\n        if(YaNoEntres){\r\n            // Say hello\r\n            if(Hora>=12 && Hora<20){\r\n                Saludo=\"Buenas tardes\";\r\n            }else if(Hora>=20 && Hora<24){\r\n                Saludo=\"Buenas noches\";\r\n            }else if(Hora>0 && Hora<12){\r\n                Saludo=\"Buenos dias\"\r\n            }else{\r\n                Saludo=\"Hola\";\r\n            }\r\n            \r\n            var txt =`${Saludo} ¿En que puedo ayudarte?`;\r\n            var reply = new builder.Message()\r\n                    .address(message.address)\r\n                    .text(txt);\r\n            bot.send(reply);\r\n            YaNoEntres=false;\r\n        }\r\n        }\r\n        \r\n    \r\n});\r\n\r\n// Dialogo Raíz \r\n// bot.dialog('/',[\r\n//     (session)=>{\r\n//         if(PrimeraVez===false){\r\n//             session.send(\"Hola de nuevo ¿En que puedo ayudarte?\");\r\n//         }\r\n//         PrimeraVez=false;\r\n//         console.log('====================================');\r\n//         console.log(\"Si entra retana me va a comprar un arizona\");\r\n//         console.log('====================================');\r\n//         session.beginDialog('/Cossete')\r\n//     }\r\n// ]);\r\n\r\n\r\nbot.dialog('/', dialog)\r\ndialog.matches('IniciarSesion',[\r\n    (session)=>{\r\n        // session.send(\"**Dando ayuda a gente mensa**\")\r\n\r\n        session.send('Muy bien, dirigite a el boton en la parte superior derecha de la pagina para iniciar')\r\n        funciones.login(session)\r\n    }\r\n    // },\r\n    // (session,results)=>{\r\n    //     if(results.response.entity != null){\r\n    //         var IniciarSesion= true;\r\n    //     }\r\n    //     session.send('Muy bien, fue un placer ayudarle, espero tenga un buen dia.');\r\n    //     opn('http://itecormovil.com/cosette/magento/index.php/customer/account/login/');\r\n    // }\r\n])\r\ndialog.matches('Saludo',[\r\n    (session)=>{\r\n        if(!SigueSaludando){\r\n            session.send('Hola')\r\n            session.send('¿Hay algo en lo que pueda ayudarte?')\r\n            SigueSaludando=true;\r\n        }else {\r\n            session.send(\"Ya ponte a hacer en vez de preguntar\")\r\n        }\r\n    }\r\n]) \r\ndialog.matches('None',[\r\n    (session)=>{\r\n        session.send(\"NONE\")\r\n    }\r\n \r\n])\r\ndialog.matches('Despedida',[\r\n    (session)=>{\r\n        var Random = Math.floor(Math.random() * 4)+1; \r\n        switch(Random){\r\n            case 1:\r\n                session.send(\"Muy bien, espero tengas un excelente dia.\")\r\n                break;\r\n            case 2:\r\n                session.send(\"Correcto, espero poder ayudarte pronto\");\r\n                break;\r\n            case 3:\r\n                session.send(\"Gracias por probar mis servicios espero poder ayudarte en un futuro cercano\");\r\n                break;\r\n            case 4:\r\n                session.send(\"Hasta luego, gracias por su preferencia\");\r\n                break;\r\n        }\r\n    }\r\n])\r\n \r\n//Dialogos dependiendo del intento detectado por LUIS\r\ndialog.matches('Comprar',[\r\n    async(session,args,next)=>{\r\n        var Producto=builder.EntityRecognizer.findAllEntities(args.entities, 'Producto')\r\n        var Precio=builder.EntityRecognizer.findAllEntities(args.entities,'Precio');\r\n        var Imagen=builder.EntityRecognizer.findAllEntities(args.entities,'Imagen');\r\n        var ExtensionEntidad=Producto.length,ExtensionPrecio=Precio.length,ExtensionImagen=Imagen.length;\r\n        console.log(`Precio ${ExtensionPrecio} y  Imagen  ${ExtensionImagen}`)\r\n        console.log(ExtensionEntidad)\r\n        if(Producto.length>0)ProductoElegido=Producto[0].entity;\r\n        ProductoElegido=Diccionario.Diccionario(ProductoElegido);\r\n        console.log(\"|\"+ProductoElegido+\"|\")\r\n        if(ExtensionPrecio>0){\r\n            revisar=\"Precio\";\r\n        }else if(ExtensionImagen>0){\r\n            revisar=\"Imagen\"\r\n        }\r\n        if(ProductoElegido!==\"\"){\r\n            await conexion.BP(ProductoElegido).then((respuesta)=>{\r\n                ProductosElegidos=respuesta; //¿Que la consulta o mostrar los productos?\r\n            }); \r\n        }else{\r\n            await conexion.BuscarSE().then((respuesta)=>{\r\n                ProductosElegidos=[]\r\n                ProductosElegidos=respuesta;\r\n            }); \r\n        }\r\n        \r\n        if(ExtensionEntidad>0){\r\n\r\n           \r\n            console.log(\"asdf\"+ProductoElegido)\r\n\r\n          \r\n            console.log(\"revisar: \"+revisar)\r\n            if(revisar===\"Precio\"){ \r\n                session.beginDialog(\"/verPrecio\");\r\n            }else if(revisar===\"Imagen\"){\r\n                session.beginDialog(\"/verImagen\");\r\n            }\r\n            session.beginDialog(\"/verPrecio\");\r\n            console.log(\"Productos elegidos   \"+ProductosElegidos.length);\r\n\r\n            // session.send(\"Estamos programando esta parte, disculpe por las molestias\");\r\n\r\n            // for(var i=0;i<ProductosElegidos.length;i++){\r\n            //     session.send(\"Producto \"+ProductosElegidos[i].Producto);\r\n            //     session.send(\"Tipo \"+ProductosElegidos[i].Tipo);\r\n            //     session.send(\"Precio \"+ProductosElegidos[i].Precio+\"\");\r\n            //     session.send(\"Imagen base64 \"+ProductosElegidos[i].Imagen);\r\n            // }\r\n            \r\n        }else{\r\n            console.log(\"Entro\")\r\n            session.beginDialog('/ComprarSEntidad');\r\n            \r\n        }\r\n\r\n    //   next();\r\n    },\r\n     \r\n]);\r\ndialog.matches('Pagar',[\r\n    (session)=>{\r\n        funciones.GuiaPago(session);\r\n    }\r\n]);\r\ndialog.matches('Carrito',[\r\n    (session)=>{\r\n        funciones.GuiaCarrito(session);\r\n    }\r\n]);\r\n\r\nbot.dialog('/ComprarSEntidad',[\r\n    (session)=>{\r\n        console.log('====================================');\r\n        session.send(\"¡Genial!\")\r\n        builder.Prompts.choice(session,'¿Quiere que lo asesore en la busqueda de un producto?',\"Si|No\",{ listStyle: builder.ListStyle.button });\r\n    },\r\n    (session,results)=>{\r\n        Asesorar=results.response.entity;\r\n        console.log(Asesorar)\r\n        if(Asesorar===\"Si\"){\r\n            // opn('http://itecormovil.com/cosette/magento/index.php/catalogsearch/advanced/'); \r\n            funciones.traerProductos(session,ProductosElegidos);\r\n            session.send(\"Si te gusta alguno da click en el boton de comprar.\")\r\n            ProductosElegidos=[];\r\n            ProductoElegido=\"\";\r\n            Producto=\"\";\r\n        }else{\r\n            session.send(\"Okey, disfruta tu visita en cossete\");\r\n        }\r\n        session.beginDialog('/');\r\n        \r\n    }\r\n    // },\r\n    // (session,results)=>{\r\n    //         var Respuesta=results.response.toLowerCase();\r\n    //         if(Respuesta===(\"si\")){\r\n    //             session.send(\"Muy bien, ¿Qué te interesa?\")\r\n    //             session.beginDialog('/')    \r\n    //         }else if(Respuesta===(\"no\")){\r\n    //             //Crear TODOOOOOOOOO el catalogo pero despuecito\r\n    //         }else{\r\n    //             session.beginDialog('/')    \r\n    \r\n    //         }\r\n            \r\n        \r\n    // }\r\n])\r\n\r\nbot.dialog('/verPrecio',[\r\n    (session)=>{\r\n        session.send(\"Okey deja busco\");\r\n        var opciones;\r\n        // for(var k=0;k<ProductosElegidos.length;k++){\r\n        //     opciones=`${ProductosElegidos[k].Producto}  ${ProductosElegidos[k].Precio}|`\r\n        //     if(k===ProductosElegidos.length-1)opciones=`${ProductosElegidos[k].Producto}  ${ProductosElegidos[k].Precio}`\r\n        // }\r\n        funciones.traerProductos(session,ProductosElegidos);\r\n        session.send(\"Encontre esto, espero y sea lo que buscabas\")\r\n        ProductosElegidos=[];\r\n        ProductoElegido=\"\";\r\n        Producto=\"\";\r\n        session.beginDialog('/');\r\n        // builder.Prompts.choice(session,\"Tengo estas opciones, ¿Cual te gusta mas?\",opciones,{ listStyle: builder.ListStyle.button });\r\n    }\r\n]);\r\n        \r\n\r\n"]}